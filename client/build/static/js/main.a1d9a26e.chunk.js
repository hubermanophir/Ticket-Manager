(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(10),i=n.n(r),s=(n(79),n(16)),o=n.n(s),l=n(22),u=n(12),d=n(23),j=n.n(d),b=n(32),h=n(105),O=n(157),m=n(150),f=n(148),v=n(149),x=n(147),p=n(4);function k(e){var t=e.ticket,n=e.formatDate,c=a.a.useState(!1),r=Object(u.a)(c,2),i=r[0],s=r[1],o=function(){s(!1)};return Object(p.jsxs)("div",{className:"show-more-button",children:[Object(p.jsx)(h.a,{className:"show-more",variant:"outlined",color:"primary",onClick:function(){s(!0)},children:"Show More"}),Object(p.jsxs)(O.a,{open:i,onClose:o,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(p.jsx)(x.a,{id:"alert-dialog-title",children:t.title}),Object(p.jsxs)(f.a,{children:[Object(p.jsx)(v.a,{id:"alert-dialog-description",children:t.content}),Object(p.jsxs)(v.a,{children:[t.userEmail,", ",n(new Date(t.creationTime))]}),Object(p.jsx)(v.a,{children:t.labels?t.labels.map((function(e,t){return Object(p.jsx)("span",{className:"dialog-label",children:"".concat(e," ")},"label key: ".concat(t))})):null})]}),Object(p.jsx)(m.a,{children:Object(p.jsx)(h.a,{onClick:o,color:"primary",autoFocus:!0,children:"Close"})})]})]})}var g=function(e){e.setHours(e.getHours()-2);var t=("0"+e.getDate()).slice(-2),n=("0"+(e.getMonth()+1)).slice(-2),c=e.getFullYear(),a=("0"+e.getHours()).slice(-2),r=("0"+e.getMinutes()).slice(-2),i=("0"+e.getSeconds()).slice(-2);return"".concat(t,"/").concat(n,"/").concat(c,", ").concat(a,":").concat(r,":").concat(i)},T=function(e){var t=e.ticket,n=e.setHiddenCounter,a=e.hiddenCounter,r=e.setTicketsArray,i=e.ticketsArray,s=e.setLiveTicketsLength,d=e.liveTicketsLength,h=Object(c.useState)(!1),O=Object(u.a)(h,2),m=O[0],f=O[1],v=Object(c.useState)(t.content),x=Object(u.a)(v,2),T=x[0],y=x[1];Object(c.useEffect)((function(){f(t.done),w()}),[]),Object(c.useEffect)((function(){f(t.done),w()}),[i]);var w=function(){if(t.content.length>=200){var e=t.content.slice(0,199)+"...";y(e)}else y(t.content)};return Object(p.jsxs)("div",{className:"ticket ".concat(m?"done":"undone"),children:[Object(p.jsx)("span",{className:"id",hidden:!0,children:"".concat(t._id)}),Object(p.jsx)("div",{className:"title",children:t.title}),Object(p.jsx)("div",{className:"content",children:T}),Object(p.jsxs)("div",{className:"ticket-info",children:[Object(p.jsx)("span",{className:"user-email",children:t.userEmail}),Object(p.jsx)("span",{className:"done-status",children:t.done}),Object(p.jsx)("span",{className:"ticket-time",children:g(new Date(t.creationTime))})]}),Object(p.jsx)("div",{className:"label-div",children:t.labels?t.labels.map((function(e,t){return Object(p.jsx)("span",{className:"label",children:e},"label key: ".concat(t))})):null}),Object(p.jsx)("button",{onClick:function(e){return function(e){var t=e.parentNode,c=Array.from(document.querySelectorAll(".ticket")).indexOf(t),o=Object(b.a)(i);o.splice(c,1),r(o),n(a+1),s(d-1)}(e.target)},className:"hideTicketButton",children:"Hide"}),Object(p.jsx)("button",{onClick:function(e){return function(e){var t=e.parentElement.childNodes[0].innerText;Object(l.a)(o.a.mark((function n(){var c,a,s,l;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,j.a.delete("/api/tickets/".concat(t));case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),console.log(n.t0.message);case 8:c=e.parentNode,a=Array.from(document.querySelectorAll(".ticket")),s=a.indexOf(c),(l=Object(b.a)(i)).splice(s,1),r(l);case 14:case"end":return n.stop()}}),n,null,[[0,5]])})))(),s(d-1)}(e.target)},className:"delete",children:"Delete"}),Object(p.jsx)("input",{checked:m,className:"checkbox",onChange:function(e){return function(e){f(!m),t.done=!m,Object(l.a)(o.a.mark((function t(){var n,c,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.parentElement,c=n.childNodes[0].innerText,a=m?"undone":"done",t.next=5,j.a.patch("/api/tickets/".concat(c,"/").concat(a));case 5:case"end":return t.stop()}}),t)})))()}(e.target)},type:"checkbox"}),Object(p.jsx)(k,{formatDate:g,ticket:t})]})},y=n(154);var w=function(e){var t=e.setTicketsArray,n=e.setLiveTicketsLength,a=e.liveTicketsLength,r=e.setBadAlert,i=e.setGoodAlert,s=Object(c.useState)(!1),d=Object(u.a)(s,2),b=d[0],v=d[1],k={title:"",content:"",userEmail:"",creationTime:new Date,labels:[]},g=function(){v(!1)};return Object(p.jsxs)("div",{className:"add-new-div",children:[Object(p.jsx)(h.a,{variant:"contained",color:"primary",onClick:function(){v(!0)},children:"Add new"}),Object(p.jsxs)(O.a,{open:b,onClose:g,"aria-labelledby":"form-dialog-title",fullWidth:!0,color:"green",children:[Object(p.jsx)(x.a,{id:"form-dialog-title",children:"New Ticket"}),Object(p.jsxs)(f.a,{children:[Object(p.jsx)(y.a,{autoFocus:!0,id:"title",label:"title",margin:"normal",helperText:"Ticket's title",onChange:function(e){k.title=e.target.value},fullWidth:!0,required:!0}),Object(p.jsx)(y.a,{id:"content",label:"Content",margin:"normal",helperText:"Ticket's content",onChange:function(e){k.content=e.target.value},variant:"outlined",rows:"3",multiline:!0,fullWidth:!0,required:!0}),Object(p.jsx)(y.a,{id:"user-email",label:"E-mail-address",margin:"normal",helperText:"Your e-mail address will be shown on the ticket",onChange:function(e){k.userEmail=e.target.value},variant:"outlined",fullWidth:!0}),Object(p.jsx)(y.a,{id:"labels",label:"labels",margin:"normal",helperText:"please use space in between each label (optional)",onChange:function(e){k.labels=e.target.value.split(" ")},variant:"outlined",fullWidth:!0})]}),Object(p.jsxs)(m.a,{children:[Object(p.jsx)(h.a,{className:"form-button",onClick:g,color:"primary",children:"Close"}),Object(p.jsx)(h.a,{className:"form-button",onClick:function(){k.title&&k.content&&(Object(l.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.post("/api/tickets",k);case 3:n=e.sent,i(!0),setTimeout((function(){i(!1)}),3e3),n.data.newArray.sort((function(e,t){var n=new Date(e.creationTime);return new Date(t.creationTime)-n})),t(n.data.newArray),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),r(!0),setTimeout((function(){r(!1)}),3e3);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))(),n(a+1),g())},color:"primary",children:"Add Ticket"})]})]})]})},N=n(151),C=n(155),A=Object(N.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function S(e){var t=e.goodAlert,n=e.badAlert,c=A();return Object(p.jsx)("div",{className:c.root,children:t?Object(p.jsx)(C.a,{className:"alert",variant:"filled",severity:"success",children:"Ticket added successfully!"}):n?Object(p.jsx)(C.a,{className:"alert",variant:"filled",severity:"error",children:"Please check your network connection!"}):null})}var D=n(152);function L(e){var t=e.setTicketsArray,n=e.ticketsArray,a=Object(c.useState)(!0),r=Object(u.a)(a,2),i=r[0],s=r[1],o=Object(c.useState)(!0),l=Object(u.a)(o,2),d=l[0],j=l[1];return Object(p.jsxs)(D.a,{id:"button-container",disableElevation:!0,variant:"contained",color:"primary",children:[Object(p.jsx)(h.a,{onClick:function(){return function(){i?n.sort((function(e,t){var n=new Date(e.creationTime);return new Date(t.creationTime)-n})):n.sort((function(e,t){return new Date(e.creationTime)-new Date(t.creationTime)}));var e=Object(b.a)(n);t(e),s(!i)}()},children:i?"Sort By Date \u2b06":"Sort By Date \u2b07"}),Object(p.jsx)(h.a,{onClick:function(){return function(){d?n.sort((function(e,t){return e.title.localeCompare(t.title)})):n.sort((function(e,t){return t.title.localeCompare(e.title)}));var e=Object(b.a)(n);t(e),j(!d)}()},children:d?"Sort By Title \u2b06":"Sort By Title \u2b07"})]})}var E=n(153),B=Object(N.a)((function(e){return{root:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}}}}));function H(){var e=B();return Object(p.jsx)("div",{id:"spinner",className:e.root,children:Object(p.jsx)(E.a,{size:100})})}var W="/api/tickets";var M=function(e){var t=Object(c.useState)([]),n=Object(u.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(0),s=Object(u.a)(i,2),d=s[0],b=s[1],O=Object(c.useState)([]),m=Object(u.a)(O,2),f=m[0],v=m[1],x=Object(c.useState)("0"),k=Object(u.a)(x,2),g=k[0],y=k[1],N=Object(c.useState)(!1),C=Object(u.a)(N,2),A=C[0],D=C[1],E=Object(c.useState)(!1),B=Object(u.a)(E,2),M=B[0],q=B[1],F=Object(c.useState)(!1),G=Object(u.a)(F,2),I=G[0],J=G[1];Object(c.useEffect)((function(){!function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(!0),e.next=3,j.a.get(W);case 3:t=e.sent,J(!1),t.data.sort((function(e,t){var n=new Date(e.creationTime);return new Date(t.creationTime)-n})),r(t.data),v(t.data),y(t.data.length);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),q(!1),b(0)}),[]);var Y=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.get("".concat(W,"?searchText=").concat(t));case 3:n=e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),q(!0),setTimeout((function(){q(!1)}),3e3);case 10:y(n.data.length),r(n.data);case 12:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"main-div",children:[(A||M)&&Object(p.jsx)(S,{goodAlert:A,badAlert:M}),I&&Object(p.jsx)(H,{}),Object(p.jsx)("h1",{id:"main-title",children:"Ticket Manager"}),Object(p.jsx)("h2",{children:"My Way"}),Object(p.jsxs)("div",{className:"control-container",children:[Object(p.jsx)(L,{ticketsArray:a,setTicketsArray:r}),Object(p.jsx)(h.a,{variant:"contained",color:"primary",id:"restoreHideTickets",onClick:function(){return b(0),r(f),void y(f.length)},children:"restore"}),Object(p.jsx)(w,{setTicketsArray:r,liveTicketsLength:g,setLiveTicketsLength:y,setBadAlert:q,setGoodAlert:D}),Object(p.jsx)("input",{onChange:function(e){return Y(e.target.value)},id:"searchInput",type:"text",placeholder:"Search Task"}),Object(p.jsxs)("div",{className:"ticket-number-div",children:["-",g," results-"]}),Object(p.jsxs)("div",{id:"counter-div",children:[Object(p.jsx)("span",{id:"hideTicketsCounter",children:d})," Hidden tickets"]})]}),Object(p.jsx)("div",{className:"ticket-area",children:a.map((function(e,t){return Object(p.jsx)(T,{ticket:e,setHiddenCounter:b,hiddenCounter:d,setTicketsArray:r,ticketsArray:a,setLiveTicketsLength:y,liveTicketsLength:g},"ticket key: ".concat(t))}))})]})};n(103);var q=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(M,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(q,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},79:function(e,t,n){}},[[104,1,2]]]);
//# sourceMappingURL=main.a1d9a26e.chunk.js.map